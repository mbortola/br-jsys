\input{model/layout.tex}% layout
\begin{document}
%definizione variabili 
\newcommand{\lv}{ 0.6 } % latest version
\newcommand{\dt}{ Manuale Utente }% Document title
\newcommand{\Grammatica}{} % paragrafo dove si trova la spiegazione della grammatica
\input{model/variables.tex}%altre variabili
\input{model/document-latest-versions.tex}%nomi documenti
%fine definizione variabili
\input{model/hyphenation.tex}%sillabazione
\input{model/titlepage.tex}%pagina del titolo

\begin{center}
\thispagestyle{plain}
\begin{table}[htbp]
\large{
\begin{tabular}{l}
\Large{\textbf{\textsf{Capitolato: ''BR-jsys``}}} \\
\begin{tabular}{|p{6cm}|p{6cm}|} \hline
\textbf{Data creazione:} & 2008/02/25 \\ \hline
\textbf{Versione:} & \lv \\ \hline
\textbf{Stato del documento:} & Formale, esterno \\ \hline
% ----------------------------------------------------------------------------autori
\textbf{Redazione:} &  \AT, \LA \\ \hline
\textbf{Revisione:} & \FC \\ \hline
\textbf{Approvazione:} & \\ \hline
\end{tabular} \\
\end{tabular}
}
\end{table}

\begin{table}[hbtp]
\large{
\begin{tabular}{l}
\Large{\textbf{\textsf{Lista di distribuzione}}} \\

\begin{tabular}{|p{6cm}|p{6cm}|} \hline
{HappyCode inc}& Gruppo di lavoro\\ \hline
{Tullio Vardanega, Renato Conte}& Rappresentanti del committente \\ \hline
{Zucchetti S.r.l}& Azienda committente\\ \hline
\end{tabular} \\
\end{tabular}
}
\end{table}
\begin{table}[hbtp]

\Large{\textbf{\textsf{Diario delle modifiche}}} \\
\begin{small}
\begin{tabular}[t]{|p{1,2cm}|p{1.9cm}|p{2.9cm}|p{5cm}|} \hline
Versione & Data & Autore & Descrizione \\ \hline
%-------------------------------------------------------------------------------diario modifiche
0.8 & 05/03/2008 & \MM & Evidenziazione dei termini contenuti nel documento \G .\\ \hline
0.7 & 04/03/2008 & \MM & Aggiunta di link ipertestuali all'indice del documento.\\ \hline
0.6 & 04/03/2008 & \MT & Modifica al layout, introduzione totale pagine e autori nel diario delle modifiche.\\ \hline
0.9 & 07/03/2008 & \AT & Stesura sezione errori probabili e cause possibili \\ \hline
0.8 & 06/03/2008 & \LA & Stesura sezione ``Requisiti minimi'' \\ \hline
0.7 & 05/03/2008 & \LA & Stesura sezione ``Caratteristiche del servizio'' \\ \hline
0.6 & 05/03/2008 & \AT & Stesura sezione ``Appendice'' \\ \hline
0.5 & 04/03/2008 & \AT & Inserimento e stesura sezione ``Descrizione della grammatica'' \\ \hline
0.4 & 03/04/2008 & \LA & Inserimento immagine 3.1, 3.2, 3.2.2, 3.3, 3.4 \\ \hline
0.3 & 02/03/2008 & \AT & Stesura sezione ``Azioni richieste/permesse'' \\ \hline
0.2 & 01/03/2008 & \AT & Completamento paragrafo ``Istruzioni per l'uso'' \\ \hline
0.1 & 25/02/2008 & \AT & Stesura preliminare del documento \\ \hline

\end{tabular} \\
\end{small}


\end{table}
\end{center}
\newpage

\tableofcontents 

\chapter{Introduzione}
Il presente documento contiene la definizione dell'architettura logica del sistema ``\underline{BR-jsys}'' con una descrizione pi\`u accurata di ogni singola componente.
\section{Definizione dell'utente del prodotto}
Il prodotto \`e rivolto ad un utente al quale non sono richieste particolari conoscenze nel campo informatico. A tale scopo il software mette a dispozione:
\begin{itemize}
\item un'interfaccia grafica user-friendly;
\item messaggi di testo che aiutano l'utente dando informazione aggiuntive sullo stato del prodotto ``\underline{BR-jsys}''.
\end{itemize}
\section{Come leggere il manuale}
Questo manuale presenta il sistema ``\underline{BR-jsys}'' da noi realizzato e insegna come usare tutte le funzioni ad esso correlate. \`E organizzato in tre sezioni in modo da rendere facile il reperimento delle informazioni desiderate:
\begin{itemize}
\item SEZIONE GENERALE: dedicata alla descrizione generale del prodotto. Fornisce informazioni di base sul funzionamento del prodotto.
\item SEZIONE DETTAGLIATA: dedicata alla descrizione dettagliata. Indispensabile per un corretto utilizzo di ogni singola parte del prodotto.
\item SEZIONE APPENDICE: riporta gli errori pi\`u comuni che l'utente pu\`o riscontrare durante l'utilizzo del prodotto e il glossario per chiarire la terminologia da noi adottata.
\end{itemize}
Verranno riportati quindi tutti i passi che si possono effettuare, grazie anche all'ausilio di immagini dell'applicazione.
\section{Documenti utili}
Il presente manuale descrive totalmente il sistema e non richiede la lettura di ulteriori documenti. Tuttavia ogni utente deve avere installato nel proprio pc ``\underline{eXist}'' in quanto vero e proprio requisito di sistema. 
\section{Come riportare problemi e malfunzionamenti}
Il prodotto software \`e dotato di un sistema di archiviazione svn. Tale archivio fornisce una sezione ``issues'' all'URL: \\ 
\textbf{``http://code.google.com/p/br-jsys/issues/list''}, che visualizza in qualsiasi momento la lista aggiornata di tutti i problemi e malfunzionamenti da noi riscontrati. Attraverso questo sistema ogni componente del gruppo potr\`a creare un ``new issue'', assegnandogli una priorit\`a che varier\`a a seconda della gravit\`a del problema. Ogni issue conterr\`a inoltre il nome dell'utente che lo ha aggiunto nella lista, oltre ad uno status (new, accepted, started, verified, etc...) che in qualsiasi momento ogni membro del gruppo potr\`a aggiornare. 

\chapter{Descrizione generale}
Il prodotto \underline{BR-jsys} permette di testare la consistenza di business objects. A tale scopo il software mette a disposizione, attraverso la propria interfaccia grafica, la possibilit\`a di inserirmento di business rules validate, cancellazione e querying nel repository.
\section{Descrizione del linguaggio}
In questa sezione faremo una descrizione dettagliata della grammatica da noi generata per rappresentare le business rules. 
\subsection{Struttura business rule}
Una business rule pu\`o essere formata da:
\begin{itemize}
\item una \textbf{regola} atomica;
\item un insieme di \textbf{regole} collegate tra loro attraverso operatori booleani (AND \textbar OR).
\end{itemize}
\subsection{Struttura regola}
Ogni singola regola \`e formata da \textbf{espressioni} collegate tra loro attaverso operatori di confronto (= \textbar\ != \textbar\ \textless\ \textbar\ \textgreater\ \textbar\ \textless= \textbar\ \textgreater=). Alla regola pu\`o venire associato un ``\textbf{message}'' (opzionale), col compito di fornire informazioni aggiuntive sullo stato di validazione della business rule. In particolare, il testo di tale messaggio verr\`a visualizzato quando si cerca di validare un business object che non rispetta una o pi\`u regole presenti nel repository.
\subsection{Struttura espressione}
Un'espressione \`e formata da campi dati che posso essere di 3 tipi:
\begin{itemize}
\item Float;
\item Bool;
\item String. 
\end{itemize}
\textbf{Float} permette operazioni di:
\begin{itemize}
\item[-] addizione;
\item[-] sottrazione;
\item[-] moltiplicazione;
\item[-] divisione.
\end{itemize}
Queste possono essere accompagnate da funzioni quali:
\begin{itemize}
\item[-] AVG (media aritmetica);
\item[-] COUNT (contatore);
\item[-] SUM (somma). 
\end{itemize}
\textbf{Bool} permette operazioni quali:
\begin{itemize}
\item[-] \&\& (congiunzione logica);
\item[-] \textbar\textbar\ (disgiunzione logica).
\end{itemize}
oltre alla funzione:
\begin{itemize}
\item[-] NOT (negazione logica). 
\end{itemize}
\textbf{String} permette invece solo operazioni di confronto.
\subsection{Esempi di business rules}
Per una maggiore comprensione della grammatica faremo ora alcuni esempi di business rules. 
\begin{itemize}
\item \textbf{ESEMPIO 1} \\
\underline{REGOLA NEL LINGUAGGIO NATURALE:} \\
L'azienda deve essere la IBM. La somma delle entrate deve essere maggiore di quella delle uscite altrimenti deve ritornare un messaggio con scritto ``errore nei calcoli''. \\
\underline{REGOLA NELLA GRAMMATICA:} \\
azienda=``IBM'' AND SUM(entrate)\textgreater\ SUM(uscite) message(``errore nei calcoli'')
\item \textbf{ESEMPI0 2} \\
\underline{REGOLA NEL LINGUAGGIO NATURALE:} \\
Il nome dello studente deve essere Lisa. I suoi crediti devono essere almeno 180 altrimenti deve ritornare un messaggio con scritto ``totale crediti sbagliato''. I suoi anni di corso devono essere non pi\`u di tre altrimenti torna un messaggio con scritto ``risulti fuori corso''.  \\
\underline{REGOLA NELLA GRAMMATICA:} \\
nome=``Lisa'' AND SUM(crediti)\textgreater =180 message(``totale crediti sbagliato'') AND COUNT(anni)\textless =3 message(``risulti fuori corso'')
\end{itemize}
\subsection{Rappresentazione in XML}
Mostriamo ora come vengono rappresentati i vari simboli e operatori della grammatica nella loro rappresentazione in XML.
\begin{table}[htbp]
\begin{tabular}{||p{3cm}||p{6.5cm}||}
\hline
\textbf{REGOLA:} & \textbf{XML:} \\ \hline
& \\ \hline
X=Y & \textless Conf type=``=''\textgreater \\
&   X \\
&   Y \\ 
& \textless /Conf\textgreater \\ \hline
X!=Y & \textless Conf type=``!=''\textgreater \\
&  X \\
&  Y \\ 
& \textless /Conf\textgreater\\ \hline
X\textless Y & \textless Conf type=``\&lt''\textgreater \\
&  X \\
&  Y \\ 
& \textless /Conf\textgreater\\ \hline
X\textgreater Y & \textless Conf type=``\&gt''\textgreater \\
&  X \\
&  Y \\ 
& \textless /Conf\textgreater\\ \hline
X\textless=Y & \textless Conf type=``\&lt=''\textgreater \\
&  X \\
&  Y \\ 
& \textless /Conf\textgreater\\ \hline
X\textgreater =Y &  \textless Conf type=``\&gt=''\textgreater \\
&  X \\
&  Y \\ 
& \textless /Conf\textgreater\\ \hline
& \\ \hline
\end{tabular} \\
\end{table}

\begin{table}[htbp]
\begin{tabular}{||p{3cm}||p{6.5cm}||}
\hline
X AND Y & \textless ORule type=``AND''\textgreater \\
&  X \\
&  Y \\
& \textless /OpRule\textgreater \\ \hline
X OR Y & \textless ORule type=``OR''\textgreater \\
&  X \\
&  Y \\
& \textless /OpRule\textgreater \\ \hline
& \\ \hline
SUM(X) & \textless Fun type=``SUM''\textgreater\\ 
&  X \\
& \textless /Fun\textgreater \\ \hline
COUNT(X) & \textless Fun type=``COUNT''\textgreater\\ 
&  X \\
& \textless /Fun\textgreater \\ \hline
AVG(X) & \textless Fun type=``AVG''\textgreater\\ 
&  X \\
& \textless /Fun\textgreater \\ \hline
& \\ \hline
X+Y & \textless OFloat type=``+''\textgreater\\
&  X \\
&  Y \\
& \textless /OFloat\textgreater \\ \hline
X-Y & \textless OFloat type=``-''\textgreater\\
&  X \\
&  Y \\
& \textless /OFloat\textgreater \\ \hline
X*Y & \textless OFloat type=``*''\textgreater\\
&  X \\
&  Y \\
& \textless /OFloat\textgreater \\ \hline
X/Y & \textless OFloat type=``/''\textgreater\\
&  X \\
&  Y \\
& \textless /OFloat\textgreater \\ \hline
& \\ \hline
X \textbar\textbar Y & \textless OBool type=``\textbar\textbar''\textgreater\\
&  X \\
&  Y \\
& \textless /OBool\textgreater \\ \hline
X \&\& Y & \textless OBool type=``\&amp;\&amp;''\textgreater \\
&  X \\
&  Y \\
& \textless /OBool\textgreater \\ \hline
\end{tabular} \\
\end{table}

\begin{table}[htbp]
\begin{tabular}{||p{3cm}||p{6.5cm}||}
\hline
NOT(X) & \textless BoFun type=``NOT''\textgreater \\
&  Y \\
& \textless /BoFun\textgreater \\ \hline
& \\ \hline 
4.0 & \textless FLOAT \textgreater4.0\textless /FLOAT\textgreater \\ \hline
true & \textless BOOL \textgreater true\textless /BOOL\textgreater \\ \hline
``stringa`` & \textless STRING \textgreater ''stringa'' \textless /STRING\textgreater \\ \hline
'campo dati' &\textless FIELD \textgreater campo dati \textless /FIELD\textgreater \\ \hline
\end{tabular} \\
\end{table}

\section{Caratteristiche del servizio}
\underline{BR-jsys} \`e destinato ad utenti che non necessariamente hanno competenze in ambito informatico. Una volta avviato, il sistema offre all'utente:
\begin{itemize}
\item[-] un'elevata configurabilit\`a ed estendibilit\`a dei business objects, mantenendo il rispetto dei controlli cablati;
\item[-] un linguaggio per la definizione di business rules;
\item[-] un validatore che consenta l'accettazione di nuove business rules soltanto se esse sono scritte secondo le specifiche del linguaggio creato;
\item[-] un repository per immagazzinare le business rules;
\item[-] una competa gestione del repository tramite interfacciamento ad \underline{eXist};
\item[-] un aiuto agli utenti meno esperti attraverso  messaggi di errore;
\item[-] una semplice interfaccia per operare su questo sistema.
\end{itemize}
\section{Requisiti minimi}
\subsection{Requisiti sofware}
Sistema operativo:
\begin{itemize}
\item Linux: tutte le piattaforme con qualsiasi distribuzione.
\item Windows: WindowsME, Windows2000 e WindowsXp home/professional.
\item MacOSX: 10.4
\item \underline{eXist} 1.2
\end{itemize}
Per usufruire del servizio \`e necessario possedere una connessione con il \underline{DBMS} ``\underline{eXist}'', come gi\`a citato precedentemente e la presenza della Java SE Development Kit (JDK) dalla versione 1.4.
\subsection{Requisiti hardware}
Per un corretto e scorrevole funzionamento del software sono richiesti:
\begin{itemize}
\item Processore 850Mhz.
\item 128Mb Ram.
\item 1Mb di spazio libero su disco.
\end{itemize}

\chapter{Istruzioni per l'uso}
\section{Descrizione funzionale}
Di seguito \`e riportata la descrizione delle funzioni del prodotto. Ad ogni passo \`e stata associata una figura, in modo da daterminare, senza amibiguit\`a il contesto dell'applicazione.
\subsection{Installazione}
Per utilizzare il prodotto \`e necessario che questo sia installato sulla macchina server. La sua architettura prevede che venga usato \underline{eXist}, scaricabile liberamente al sito http://exist.sourceforge.net. Dopodich\`e:
\begin{itemize}
\item Linux e MacOSX: avviare il prompt dei comandi (shell), accedere alla cartella ``\underline{BR-jsys}'' fornita e digitare il comando ``sh install''.
\item Windows: avviare il prompt dei comandi (shell), accedere alla cartella ``\underline{BR-jsys}'' fornita e cliccare sulla sottocartella ``install.exe''.
\end{itemize}
\subsection{Avvio dell'applicazione}
\begin{center}
\includegraphics[width=0.5\textwidth]{manuale_utente/login.eps}\\
 figura 3.0: schermata di login
\end{center}
Per avviare il programma una volta terminata l' installazione, sia in Linux che in Windows che in MacOSX, avviare il prompt dei comandi (shell), accedere alla cartella ``\underline{BR-jsys}'' fornita e digitare ``\underline{BR-jsys}.start''. Dopo un breve periodo di caricamento apparir\`a la schermata di login (figura 3.0), nella quale l' utente che accede per la prima volta al servizio dovr\`a digitare i dati: 
\begin{itemize}
\item username
\item password
\end{itemize}
I dati di autenticazione immessi sono quelli utilizzati per la registrazione al server ``\underline{eXist}''. Tutti i dati richiesti dovranno essere insieriti prestando attenzione alla scelta della password, la quale dovr\`a avere una complessit\`a elevata. 
\section{Azioni richieste/permesse}
\begin{center}
\includegraphics[width=0.5\textwidth]{manuale_utente/schermata_principale.eps}\\
 figura 3.1: schermata principale
\end{center}
A questo punto verr\`a visualizzata la schermata principale (figura 3.1).
Nella figura 3.1 vediamo illustrate le tre funzionalit\`a associate ai rispettivi bottoni:
\begin{itemize}
\item Inserisci \underline{Business Rule};
\item Rimuovi \underline{Business Rule};
\item \underline{Sandbox}.
\end{itemize}
L'analisi dettagliata delle singole azioni verr\`a trattata nelle sottosezioni seguenti.
\subsection{Inserisci \underline{Business Rule}}
\begin{center}
\includegraphics[width=0.7\textwidth]{manuale_utente/schermata_inserimento.eps}\\
 figura 3.2: schermata di inserimento
\end{center}
Nella figura 3.2 vediamo illustrata la schermata di inserimento di una nuova business rule. L'utente dovr\`a inserire negli appositi spazi i campi dati richiesti:
\begin{itemize}
\item Nome: il nome della business rule che l'utente intende inserire (il nome dovr\`a essere significativo)
\item BO Associato: il nome della classe del business object alla quale si vuole associare la regola.
\item Regola: la regola scritta secondo la grammatica spiegata nel paragrafo \Grammatica.
\item Commento: descrizione sintetica del comportamento della regola. 
\begin{center}
\includegraphics[width=1.0\textwidth]{manuale_utente/schermata_esempio_inserimento.eps}\\
 figura 3.2.2: schermata di inserimento
\end{center}
\end{itemize}
L'utente dovr\`a ora cliccare sul pulsante ``Valida''. Se l'inserimento viene effettuato con successo verr\`a visualizzato un messaggio che ne conferma l'esito positivo, in caso contrario uno negativo. 
\subsection{Rimuovi \underline{Business Rule}}
\begin{center}
\includegraphics[width=0.9\textwidth]{manuale_utente/schermata_rimozione.eps}\\
 figura 3.3: schermata di rimozione
\end{center}
Nella figura 3.3 vediamo illustrata la schermata di cancellazione di una business rule. Per procedere all'eliminazione l'utente avr\`a due modi:
\begin{itemize}
\item inserire nell'appostito campo (TextBox) il nome della business rule che intende rimuovere e cliccare sul pulsante ``Cerca'';
\item selezionare una o pi\`u business rules dalla lista sottostante;
\end{itemize}
Se la business rule risulta presente nel repository, comparir\`a  nel campo ``Details'' i suoi dettagli (Nome, BO Associato, Regola, Commento). 
\begin{footnotesize}\textit{Nel caso di selezione di pi\`u regole, verranno mostrati i dettagli dell'ultima selezionata.
} \end{footnotesize} A questo punto baster\`a cliccare sul pulsante ``Rimuovi Selezionate''.  Se la cancellazione viene effettuata con successo verr\`a visualizzato un messaggio che ne conferma l'esito positivo, in caso contrario uno negativo.
\subsection{\underline{Sandbox}}
\begin{center}
 \includegraphics[width=0.9\textwidth]{manuale_utente/schermata_sandbox.eps} \\
 figura 3.4: schermata sandbox
\end{center}
Nella figura 3.4 vediamo illustrata la schermata di sandbox. Per procedere con l'interrogazione del database, l'utente dovr\`a:
\begin{itemize}
\item inserire la query (scritta in linguaggio Xquery) nell'appostito campo dati ``Query'';
\item cliccare sul pulsante ``Esegui''.
\end{itemize}
A questo punto verr\`a visualizzato nel campo dati ``Risultati'' l'esito della query.
\section{Errori probabili e cause possibili}
% da fare
\chapter{Appendice}
\section{Messaggi di errore e loro significato}
\begin{table}[htbp]
\begin{tabular}{||p{6.5cm}||p{6.5cm}||}
\hline
\textbf{Messaggio:} & \textbf{Descrizione:} \\ \hline
Oggetto associato \textless nome associato\textgreater\ inesistente! & Inserimento di una business rule con un business object associato non valido. \\ \hline
Campo dati \textless nome campo dati\textgreater\ non trovato: validazione interrotta! & Riferimento ad un campo dati sbagliato. La validazione viene interrotta. \\ \hline
Operazione non consentita! \textless tipo 1\textgreater\ != \textless tipo 2\textgreater\ : validazione interrotta! & Errore tra tipi. Esecuzione di un'operazione di confronto tra due tipi diversi. La validazione viene interrotta. \\ \hline
Errore sintattico \textless tutta la business rule scritta fino all'errore\textgreater\ : validazione interrotta! & Errore di scrittura nella business rule. La validazione viene interrotta. \\ \hline
Regola \textless nome regola\textgreater\  gi\`a presente: inserimento fallito! & La regola ha un nome gi\`a presente nel repository. Non verr\`a quindi inserita. \\ \hline
Collegarsi ad \underline{eXist}! & Il server \underline{eXist} non \`e avviato. \\ \hline
Dati di autenticazione non corretti! & Nome utente e/o password non inseriti correttamente. \\ \hline
Business rule non trovata! & La business rule cercata non \`e stata trovata nel repository. \\ \hline
\end{tabular} \\
\end{table}
\section{Glossario}
Viene fornito come documento esterno chiamato \G. I termini che sono presenti nel \G sono sottolineati.

\end{document}
